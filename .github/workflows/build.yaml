name: Build
on: 
  - push
  - workflow_dispatch
env:
  REGISTRY: ghcr.io
  IMAGE: actraiser2/codechallenge:${{github.sha}}
  PASSWORD: ${{secrets.TOKEN}}
  USERNAME: ${{github.actor}}
jobs:
  build:
    runs-on: ubuntu-22.04
    steps:
        - name: checkout
          uses: actions/checkout@v3 
        - name: setup jdk
          uses: actions/setup-java@v3
          with: 
              distribution: temurin 
              java-version: 17 
        - name: compile source code
          run: mvn compile
        - name: test & package
          run: mvn package
        - name: log token
          run: mvn --version
        - name: publish
          run: mvn spring-boot:build-image
           
